<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <title>Português Acessível para Surdos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    /* --- Geral e Tipografia --- */
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Inter, sans-serif;
      background-color: #f5f3ef; /* Bege */
      color: #1a1a1a; /* Preto */
      max-width: 980px;
      margin: 24px auto;
      padding: 0 16px;
      line-height: 1.6;
    }
    h1 {
      font-size: 1.75rem;
      color: #1a1a1a;
      text-align: center;
      margin-bottom: 8px;
    }
    p.subtitle {
      text-align: center;
      margin-top: 0;
      color: #555;
    }
    h3 {
      margin-top: 0;
      color: #d65a38; /* Acento Laranja/Vermelho */
    }

    /* --- Layout e Cards --- */
    .grid {
      display: grid;
      gap: 20px;
    }
    @media(min-width: 800px) {
      .grid { grid-template-columns: 1fr 1fr; }
    }
    .card {
      background-color: #fff;
      border: 1px solid #e0e0e0;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    }

    /* --- Formulários e Botões --- */
    textarea {
      width: 100%;
      min-height: 180px;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 8px;
      resize: vertical;
      font-size: 1rem;
      box-sizing: border-box;
    }
    textarea:focus {
      border-color: #f2a735; /* Acento Amarelo */
      outline: 2px solid #f2a735;
    }
    .toolbar {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 12px;
    }
    button {
      padding: 10px 16px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background-color: #fff;
      cursor: pointer;
      font-weight: 500;
      font-size: 0.95rem;
      transition: background-color 0.2s, border-color 0.2s;
    }
    button:hover {
      background-color: #f0f0f0;
      border-color: #bbb;
    }
    .primary {
      background-color: #d65a38;
      color: white;
      border-color: #d65a38;
    }
    .primary:hover {
      background-color: #b84a2a;
      border-color: #b84a2a;
    }

    /* --- Saídas --- */
    .output-box {
      background-color: #f5f3ef;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 15px;
      min-height: 100px;
      white-space: pre-wrap;
      font-size: 1rem;
    }
    .output-box.mono {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    }
  </style>
</head>
<body>

  <h1>Português Acessível</h1>
  <p class="subtitle">Adapte textos para uma comunicação mais clara e direta.</p>

  <div class="grid">
    <!-- Coluna de Entrada -->
    <div class="card">
      <h3>Texto Original</h3>
      <textarea id="input" placeholder="Cole seu texto aqui..."></textarea>
      <div class="toolbar">
        <button onclick="fillSample()">Exemplo</button>
        <button onclick="clearAll()">Limpar</button>
        <button class="primary" onclick="process()">Gerar</button>
      </div>
    </div>

    <!-- Coluna de Saída -->
    <div class="card">
      <h3>Versões Adaptadas</h3>
      
      <h4>Simplificado Leve</h4>
      <div id="outSimple" class="output-box"></div>
      <div class="toolbar">
        <button onclick="copyOut('#outSimple', this)">Copiar</button>
      </div>

      <h4 style="margin-top: 20px;">Estilo Libras</h4>
      <div id="outLibras" class="output-box mono"></div>
      <div class="toolbar">
        <button onclick="copyOut('#outLibras', this)">Copiar</button>
      </div>
    </div>
  </div>

<script>
/* ===== Regras e Configurações ===== */
const KEY_TERMS = new Set(["família", "comunidade", "discipulado", "libras", "deus", "bíblia"]);

const GIRA_REPLACE = {
  "tô": "estou", "tá": "está", "pra": "para", "pro": "para o",
  "vc": "você", "cê": "você", "q": "que"
};

const SIMPLE_REPLACE = {
  "entretanto": "mas", "todavia": "mas", "porém": "mas",
  "consequentemente": "por isso", "portanto": "por isso",
  "posteriormente": "depois", "anteriormente": "antes"
};

const FILLERS = ["realmente", "basicamente", "literalmente", "inclusive", "apenas", "simplesmente"];
const ARTICLES = ["o", "a", "os", "as", "um", "uma", "uns", "umas", "do", "da", "dos", "das", "no", "na", "nos", "nas"];
const TEMP_MARKERS = ["hoje", "amanhã", "ontem", "agora", "depois", "antes", "cedo", "tarde", "noite", "segunda", "terça", "quarta", "quinta", "sexta", "sábado", "domingo"];

/* ===== Funções de Transformação ===== */

function normalizeGiras(text) {
  let normalized = text.toLowerCase();
  for (const [giria, normal] of Object.entries(GIRA_REPLACE)) {
    normalized = normalized.replace(new RegExp(`\\b${giria}\\b`, 'g'), normal);
  }
  return normalized;
}

function splitSentences(text) {
  // Quebra em sentenças, considerando . ! ? e vírgulas antes de maiúsculas.
  return text.replace(/([.!?])\s*(?=[A-Z])/g, "$1|").split('|').map(s => s.trim()).filter(Boolean);
}

function toSimple(sentence) {
  let s = sentence.toLowerCase();
  for (const [word, replacement] of Object.entries(SIMPLE_REPLACE)) {
    s = s.replace(new RegExp(`\\b${word}\\b`, 'g'), replacement);
  }
  for (const filler of FILLERS) {
    s = s.replace(new RegExp(`\\b${filler}\\b`, 'g'), '');
  }
  s = s.replace(/\s+/g, ' ').trim();
  return s.charAt(0).toUpperCase() + s.slice(1);
}

function toLibras(sentence) {
  let s = normalizeGiras(sentence);
  
  // Remove pontuações que não sejam de fim de frase
  s = s.replace(/[,;:“”"()]/g, '');

  let tokens = s.split(/\s+/).filter(Boolean);
  let finalTokens = [];
  
  let timeMarkers = [];
  let otherTokens = [];

  // Redução de verbos (simplificada)
  const reduceVerb = (word) => {
    if (word.length < 4) return word;
    const endings = [
      {suf: "ando", repl: "ar"}, {suf: "endo", repl: "er"}, {suf: "indo", repl: "ir"},
      {suf: "ou", repl: "ar"}, {suf: "eu", repl: "er"}, {suf: "iu", repl: "ir"},
      {suf: "amos", repl: "ar"}, {suf: "emos", repl: "er"}, {suf: "imos", repl: "ir"},
      {suf: "aram", repl: "ar"}, {suf: "eram", repl: "er"}, {suf: "iram", repl: "ir"}
    ];
    for (const {suf, repl} of endings) {
      if (word.endsWith(suf)) {
        return word.slice(0, -suf.length) + repl;
      }
    }
    return word;
  };

  tokens.forEach(token => {
    const lowerToken = token.toLowerCase();
    if (KEY_TERMS.has(lowerToken)) {
      otherTokens.push(token.toUpperCase());
    } else if (TEMP_MARKERS.includes(lowerToken)) {
      timeMarkers.push(token.toUpperCase());
    } else if (!ARTICLES.includes(lowerToken)) {
      otherTokens.push(reduceVerb(lowerToken).toUpperCase());
    }
  });

  finalTokens = [...timeMarkers, ...otherTokens];
  
  // Limita o tamanho da linha e adiciona vírgulas
  let line = finalTokens.join(' ');
  if (finalTokens.length > 12) {
      const mid = Math.ceil(finalTokens.length / 2);
      const part1 = finalTokens.slice(0, mid).join(' ');
      const part2 = finalTokens.slice(mid).join(' ');
      line = `${part1},\n• ${part2}`;
  }
  
  return line;
}

/* ===== Funções de UI (Interface do Usuário) ===== */

function process() {
  const input = document.getElementById('input').value;
  if (!input.trim()) return;

  const sentences = splitSentences(input);

  // Geração do Simplificado Leve
  const simpleOutput = sentences.map(s => `• ${toSimple(s)}`).join('\n');
  document.getElementById('outSimple').textContent = simpleOutput;

  // Geração do Estilo Libras
  const librasOutput = sentences.map(s => `• ${toLibras(s)}`).join('\n');
  document.getElementById('outLibras').textContent = librasOutput;
}

function fillSample() {
  document.getElementById('input').value = "Continue aprendendo conectando-se com outras famílias e aprimorando sua prática educacional. Quando outras mães passarem pelas mesmas dúvidas que você enfrentou, seja a voz de apoio e encorajamento que gostaria de ter ouvido.";
  process();
}

function clearAll() {
  document.getElementById('input').value = "";
  document.getElementById('outSimple').textContent = "";
  document.getElementById('outLibras').textContent = "";
}

function copyOut(selector, btn) {
  const el = document.querySelector(selector);
  const text = el.textContent;
  if (!text) return;

  // Abordagem moderna (compatível com iPhone/HTTPS)
  if (navigator.clipboard && window.isSecureContext) {
    navigator.clipboard.writeText(text)
      .then(() => flash(btn, "Copiado!"))
      .catch(() => legacyCopy(text, btn)); // Fallback se a permissão falhar
  } else {
    // Fallback para HTTP ou navegadores antigos
    legacyCopy(text, btn);
  }
}

function legacyCopy(text, btn) {
  const ta = document.createElement('textarea');
  ta.value = text;
  ta.style.position = 'fixed'; // Fora da tela
  ta.style.opacity = '0';
  document.body.appendChild(ta);
  ta.focus();
  ta.select();
  try {
    document.execCommand('copy');
    flash(btn, "Copiado!");
  } catch (e) {
    flash(btn, "Erro ao copiar");
  }
  document.body.removeChild(ta);
}

function flash(btn, msg) {
  const originalText = btn.textContent;
  btn.textContent = msg;
  btn.disabled = true;
  setTimeout(() => {
    btn.textContent = originalText;
    btn.disabled = false;
  }, 1200);
}
</script>

</body>
</html>

